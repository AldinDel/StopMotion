<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stop Motion Studio</title>
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
<div class="app">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">ğŸ¬</div>

        <button class="tool-btn active" data-tool="camera" title="Kamera">ğŸ“·</button>
        <button class="tool-btn" data-tool="upload" title="Upload">ğŸ“¤</button>
        <button class="tool-btn" data-tool="demo" title="Demo">âœ¨</button>

        <div class="sidebar-bottom">
            <div class="divider"></div>
            <button class="action-btn export" id="exportBtn" title="Exportieren">ğŸ’¾</button>
            <button class="action-btn delete" id="clearBtn" title="Alle lÃ¶schen">ğŸ—‘ï¸</button>
            <button class="action-btn settings" id="settingsBtn" title="Einstellungen">âš™ï¸</button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="top-bar-text" id="modeText">Kamera</div>
            <div class="top-bar-text" id="frameInfo">Kein Frame</div>
        </div>

        <!-- Viewport -->
        <div class="viewport">
            <div class="viewport-canvas">
                <img id="onionSkin" class="onion-skin" style="display: none;">
                <video id="cameraVideo" autoplay playsinline muted style="display: none;"></video>
                <img id="playbackImage" style="display: none;">

                <div id="placeholderCamera" class="placeholder camera">
                    <div class="placeholder-icon">ğŸ“·</div>
                    <div class="placeholder-title">Kamera</div>
                    <div class="placeholder-subtitle">Live-Aufnahme</div>
                </div>

                <div id="placeholderUpload" class="placeholder upload" style="display: none;">
                    <div class="placeholder-icon">ğŸ“¤</div>
                    <div class="placeholder-title">Bilder hochladen</div>
                    <div class="placeholder-subtitle">WÃ¤hle Bilder von deinem Computer</div>
                    <button class="upload-btn-primary" onclick="document.getElementById('fileInput').click()">Dateien auswÃ¤hlen</button>
                </div>

                <div id="placeholderDemo" class="placeholder demo" style="display: none;">
                    <div class="placeholder-icon">âœ¨</div>
                    <div class="placeholder-title">Demo-Modus</div>
                    <div class="placeholder-subtitle">Erstelle bunte Demo-Frames zum Testen</div>
                </div>

                <button id="captureBtn" class="capture-btn" style="display: none;">
                    <span id="captureBtnIcon">ğŸ“·</span>
                    <span id="captureBtnText">Aufnehmen</span>
                </button>
            </div>
        </div>

        <!-- Timeline -->
        <div class="timeline">
            <div class="timeline-controls">
                <div class="playback-controls">
                    <button class="playback-btn play" id="playBtn" disabled>â–¶ï¸</button>
                    <button class="playback-btn stop" id="stopBtn" disabled>â¹ï¸</button>
                    <div class="frame-counter">
                        <span id="currentFrameNum">0</span> / <span id="totalFrames">0</span>
                    </div>
                </div>
                <div class="top-bar-text">Timeline</div>
            </div>
            <div class="timeline-track" id="timelineTrack">
                <div class="timeline-empty">Keine Frames vorhanden - Erstelle dein erstes Frame</div>
            </div>
        </div>
    </div>

    <!-- Properties Panel -->
    <div class="properties">
        <div class="properties-header">
            <h2>Eigenschaften</h2>
        </div>
        <div class="properties-content">
            <!-- Project Info -->
            <div class="property-section">
                <h3>Projekt</h3>
                <div class="property-card">
                    <div class="property-row">
                        <span class="property-label">Frames:</span>
                        <span class="property-value" id="propFrameCount">0</span>
                    </div>
                    <div class="property-row">
                        <span class="property-label">Dauer:</span>
                        <span class="property-value" id="propDuration">0s</span>
                    </div>
                </div>
            </div>

            <!-- FPS -->
            <div class="property-section">
                <h3>ğŸ“Š Bildrate</h3>
                <div class="property-row" style="margin-bottom: 8px;">
                    <span class="property-label">FPS</span>
                    <span class="property-value" style="color: #2563eb;" id="fpsValue">12</span>
                </div>
                <input type="range" class="fps-slider" id="fpsSlider" min="6" max="30" value="12">
                <div class="fps-presets">
                    <button class="fps-preset" data-fps="6">6</button>
                    <button class="fps-preset active" data-fps="12">12</button>
                    <button class="fps-preset" data-fps="15">15</button>
                    <button class="fps-preset" data-fps="24">24</button>
                    <button class="fps-preset" data-fps="30">30</button>
                </div>
            </div>

            <!-- Onion Skin -->
            <div class="property-section">
                <h3>ğŸ‘ï¸ Onion Skinning</h3>
                <button class="onion-toggle active" id="onionToggle">
                    <span>ğŸ‘ï¸</span>
                    <span id="onionToggleText">Aktiviert</span>
                </button>
                <div id="onionOpacityControl" style="margin-top: 16px;">
                    <div class="property-row" style="margin-bottom: 8px;">
                        <span class="property-label">Transparenz</span>
                        <span class="property-value" style="color: #2563eb;" id="opacityValue">30%</span>
                    </div>
                    <input type="range" class="fps-slider" id="opacitySlider" min="10" max="80" value="30">
                </div>
            </div>

            <!-- Tips -->
            <div class="property-section">
                <h3>Tipps</h3>
                <div class="tips-card">
                    <p>ğŸ’¡ Verwende Onion Skinning, um das vorherige Frame zu sehen</p>
                    <p>âš¡ ErhÃ¶he die FPS fÃ¼r flÃ¼ssigere Animationen</p>
                    <p>ğŸ¬ Dupliziere Frames fÃ¼r lÃ¤ngere Pausen</p>
                </div>
            </div>
        </div>
    </div>
</div>

<input type="file" id="fileInput" accept="image/*" multiple>
<canvas id="captureCanvas"></canvas>

<!-- Error Modal -->
<div id="errorModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-icon">âš ï¸</div>
        <h2 class="modal-title">Keine Frames vorhanden</h2>
        <p class="modal-message">Sie mÃ¼ssen mindestens ein Frame erstellen, bevor Sie exportieren kÃ¶nnen.</p>
        <button class="modal-btn" onclick="closeErrorModal()">Verstanden</button>
    </div>
</div>

<!-- No Frames to Delete Modal -->
<div id="noFramesModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-icon">â„¹ï¸</div>
        <h2 class="modal-title">Keine Frames zum LÃ¶schen</h2>
        <p class="modal-message">Es sind keine Frames vorhanden, die gelÃ¶scht werden kÃ¶nnten.</p>
        <button class="modal-btn" onclick="closeNoFramesModal()">Verstanden</button>
    </div>
</div>

<!-- Confirm Delete Modal -->
<div id="confirmDeleteModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-icon">ğŸ—‘ï¸</div>
        <h2 class="modal-title">Wirklich alle Frames lÃ¶schen?</h2>
        <p class="modal-message">Diese Aktion kann nicht rÃ¼ckgÃ¤ngig gemacht werden. Alle Frames werden permanent gelÃ¶scht.</p>
        <div class="modal-buttons">
            <button class="modal-btn modal-btn-secondary" onclick="closeConfirmDeleteModal()">Abbrechen</button>
            <button class="modal-btn modal-btn-danger" onclick="confirmDelete()">LÃ¶schen</button>
        </div>
    </div>
</div>

<!-- Settings Modal -->
<div id="settingsModal" class="modal" style="display: none;">
    <div class="modal-content settings-modal">
        <div class="modal-icon">âš™ï¸</div>
        <h2 class="modal-title">Einstellungen</h2>

        <div class="settings-section">
            <h3 class="settings-label">Farbmodus</h3>
            <div class="theme-options">
                <button class="theme-option active" data-theme="light" onclick="setTheme('light')">
                    <div class="theme-preview theme-preview-light"></div>
                    <span>Hell</span>
                </button>
                <button class="theme-option" data-theme="grey" onclick="setTheme('grey')">
                    <div class="theme-preview theme-preview-grey"></div>
                    <span>Grau</span>
                </button>
                <button class="theme-option" data-theme="dark" onclick="setTheme('dark')">
                    <div class="theme-preview theme-preview-dark"></div>
                    <span>Dunkel</span>
                </button>
            </div>
        </div>

        <button class="modal-btn" onclick="closeSettingsModal()" style="margin-top: 24px;">SchlieÃŸen</button>
    </div>
</div>

<script src="../application/script.js"></script>
</body>
</html>
